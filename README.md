# Docker

## Tabla de Contenido

- [Introducción a Docker](#introduccion-docker)
  - [¿Qué es Docker?](#que-es-docker)
  - [Historia y Evolución](#historia-evolucion-docker)
  - [¿Por qué usar Docker?](#por-que-usar-docker)
    - [Beneficios Clave (Consistencia, Aislamiento, Portabilidad, Escalabilidad)](#beneficios-clave-docker)
  - [Docker vs. Máquinas Virtuales](#docker-vs-maquinas-virtuales)
  - [Conceptos Fundamentales](#conceptos-fundamentales-docker)
    
- [Imágenes de Docker](#imagenes-docker)
  - [¿Qué es una Imagen de Docker?](#que-es-imagen-docker)
  - [Capas de Imágenes (Image Layers)](#capas-imagenes)
  - [Registros de Imágenes (Registries)](#registros-imagenes)
    - [Docker Hub](#docker-hub)
    - [Registros Privados](#registros-privados)
  - [Comandos Básicos de Imágenes](#comandos-basicos-imagenes)
    - [`docker pull`: Descargar Imágenes](#docker-pull)
    - [`docker images`: Listar Imágenes](#docker-images)
    - [`docker rmi`: Eliminar Imágenes](#docker-rmi)
    - [`docker history`: Ver Historial de Capas](#docker-history)
    - [`docker tag`: Etiquetar Imágenes](#docker-tag)
    - [`docker push`: Subir Imágenes](#docker-push)

- [Contenedores de Docker](#contenedores-docker)
  - [¿Qué es un Contenedor de Docker?](#que-es-contenedor-docker)
  - [Ciclo de Vida de un Contenedor](#ciclo-vida-contenedor)
  - [Comandos Básicos de Contenedores](#comandos-basicos-contenedores)
    - [`docker run`: Crear y Ejecutar Contenedores](#docker-run)
      - [Modo Detached (`-d`)](#modo-detached)
      - [Asignación de Puertos (`-p`)](#asignacion-puertos)
      - [Variables de Entorno (`-e`)](#variables-entorno-contenedor)
      - [Volúmenes (`-v`)](#volumenes-run)
      - [Nombre del Contenedor (`--name`)](#nombre-contenedor)
      - [Ejecutar Comandos en el Contenedor](#ejecutar-comandos-contenedor)
    - [`docker ps`: Listar Contenedores](#docker-ps)
    - [`docker stop`, `docker start`, `docker restart`: Controlar Contenedores](#docker-stop-start-restart)
    - [`docker rm`: Eliminar Contenedores](#docker-rm)
    - [`docker exec`: Ejecutar Comandos en Contenedores en Ejecución](#docker-exec)
    - [`docker inspect`: Inspeccionar Contenedores](#docker-inspect)
    - [`docker logs`: Ver Logs de Contenedores](#docker-logs)
    - [`docker top`: Ver Procesos en Contenedor](#docker-top)
    - [`docker cp`: Copiar Archivos a/desde Contenedor](#docker-cp)

- [Dockerfile: Construyendo tus Propias Imágenes](#dockerfile)
  - [¿Qué es un Dockerfile?](#que-es-dockerfile)
  - [Instrucciones Clave del Dockerfile](#instrucciones-dockerfile)
    - [`FROM`: Imagen Base](#from-dockerfile)
    - [`RUN`: Ejecutar Comandos](#run-dockerfile)
    - [`CMD`: Comando por Defecto](#cmd-dockerfile)
    - [`ENTRYPOINT`: Punto de Entrada](#entrypoint-dockerfile)
    - [`COPY`: Copiar Archivos/Directorios](#copy-dockerfile)
    - [`ADD`: Añadir Archivos/URLs](#add-dockerfile)
    - [`WORKDIR`: Directorio de Trabajo](#workdir-dockerfile)
    - [`EXPOSE`: Exponer Puertos](#expose-dockerfile)
    - [`ENV`: Variables de Entorno](#env-dockerfile)
    - [`ARG`: Argumentos de Construcción](#arg-dockerfile)
    - [`VOLUME`: Puntos de Montaje de Volumen](#volume-dockerfile)
    - [`USER`: Usuario del Contenedor](#user-dockerfile)
    - [`HEALTHCHECK`: Verificación de Salud](#healthcheck-dockerfile)
  - [Proceso de Construcción (`docker build`)](#proceso-construccion-dockerfile)
  - [Mejores Prácticas para Dockerfiles](#mejores-practicas-dockerfile)
    - [Imágenes Base Ligeras](#imagenes-base-ligeras)
    - [Minimizar Capas](#minimizar-capas)
    - [Multi-Stage Builds](#multi-stage-builds)
    - [Caché de Construcción](#cache-construccion)
    - [Seguridad](#seguridad-dockerfile)

- [Persistencia de Datos (Volúmenes)](#persistencia-datos-docker)
  - [¿Por qué la Persistencia?](#por-que-persistencia)
  - [Tipos de Volúmenes](#tipos-volumenes-docker)
    - [Volúmenes Nombrados (Named Volumes)](#volumenes-nombrados-docker)
      - [Creación y Gestión (`docker volume`)](#creacion-gestion-volumenes)
    - [Bind Mounts](#bind-mounts-docker)
    - [tmpfs Mounts](#tmpfs-mounts)
  - [Uso de Volúmenes en Contenedores](#uso-volumenes-contenedores)
  - [Inspeccionar Volúmenes](#inspeccionar-volumenes)
  - [Casos de Uso Comunes](#casos-uso-volumenes)

- [Redes en Docker](#redes-docker)
  - [Conceptos de Redes de Contenedores](#conceptos-redes-contenedores-docker)
  - [Tipos de Redes](#tipos-redes-docker)
    - [`bridge` (Por Defecto)](#bridge-network)
    - [`host` Network](#host-network)
    - [`none` Network](#none-network)
    - [`overlay` Network (para Swarm)](#overlay-network-docker)
  - [Crear Redes Personalizadas (`docker network create`)](#crear-redes-personalizadas)
  - [Conectar Contenedores a Redes](#conectar-contenedores-redes)
  - [DNS en Docker](#dns-docker)
  - [Publicación de Puertos (`-p`, `--publish`)](#publicacion-puertos-docker)
  - [Vínculo entre Contenedores (`--link` - Legado)](#vinculo-contenedores-legado)

- [Docker Compose: Orquestación Local](#docker-compose)
  - [¿Qué es Docker Compose?](#que-es-docker-compose)
  - [Archivo `docker-compose.yml`](#docker-compose-yml)
    - [Versiones del Formato](#versiones-formato-compose)
    - [Servicios (`services`)](#servicios-compose)
    - [Redes (`networks`)](#redes-compose)
    - [Volúmenes (`volumes`)](#volumenes-compose)
  - [Comandos Básicos de Compose](#comandos-basicos-compose)
    - [`docker compose up`: Levantar Aplicaciones](#docker-compose-up)
    - [`docker compose down`: Bajar Aplicaciones](#docker-compose-down)
    - [`docker compose ps`: Listar Servicios](#docker-compose-ps)
    - [`docker compose logs`: Ver Logs](#docker-compose-logs)
    - [`docker compose exec`: Ejecutar Comandos](#docker-compose-exec)
    - [`docker compose build`: Reconstruir Imágenes](#docker-compose-build)
  - [Casos de Uso de Docker Compose](#casos-uso-compose)

- [Docker Hub y Registros de Contenedores](#docker-hub-registros)
  - [Docker Hub: El Registro por Defecto](#docker-hub-default)
  - [Cuentas y Repositorios](#cuentas-repositorios-docker-hub)
  - [Automatización de Builds (Automated Builds)](#automatizacion-builds)
  - [Registros Privados (Private Registries)](#registros-privados-docker)
  - [Autenticación (`docker login`)](#docker-login)

- [Seguridad en Docker](#seguridad-docker)
  - [Principios de Seguridad de Contenedores](#principios-seguridad-contenedores)
  - [Imágenes Seguras](#imagenes-seguras-docker)
    - [Minimizar la Superficie de Ataque](#minimizar-superficie-ataque)
    - [Escaneo de Vulnerabilidades](#escaneo-vulnerabilidades)
  - [Contenedores Seguros](#contenedores-seguros-docker)
    - [Principio de Menor Privilegio (Non-root user)](#menor-privilegio-docker)
    - [Restricción de Recursos (CPU, Memoria)](#restriccion-recursos-docker)
    - [Capacidades de Linux (Capabilities)](#capacidades-linux-docker)
    - [Seccomp y AppArmor](#seccomp-apparmor)
  - [Gestión de Secretos](#gestion-secretos-docker)
  - [Redes Seguras](#redes-seguras-docker)

- [Optimización de Rendimiento y Troubleshooting](#optimizacion-rendimiento-troubleshooting)
  - [Optimización de Rendimiento](#optimizacion-rendimiento-docker)
    - [Uso Eficiente de Recursos](#uso-eficiente-recursos-docker)
    - [Optimización de I/O](#optimizacion-io-docker)
    - [Caché de Capas de Dockerfile](#cache-capas-dockerfile-opt)
  - [Troubleshooting Común](#troubleshooting-comun-docker)
    - [Contenedores que no Inician](#contenedores-no-inician)
    - [Problemas de Red](#problemas-red-docker-troubleshoot)
    - [Problemas de Volumen](#problemas-volumen-docker)
    - [Errores de Construcción de Imágenes](#errores-construccion-imagenes)
    - [Uso de `docker events`, `docker system df`, `docker prune`](#docker-events-system-df-prune)
